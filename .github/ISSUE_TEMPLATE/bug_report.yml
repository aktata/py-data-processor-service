name: "ğŸ Bug æŠ¥å‘Š"
description: "æŠ¥å‘Šä¸€ä¸ªå¯å¤ç°çš„é—®é¢˜ï¼ˆCLI / FastAPI / æŠ¥å‘Šå¯¼å‡º / è§£æç­‰ï¼‰"
title: "[Bug] "
labels: ["bug"]
body:
  - type: markdown
    attributes:
      value: |
        æ„Ÿè°¢åé¦ˆï¼è¿™ä¸ªé¡¹ç›®å¸¸è§å…¥å£åŒ…æ‹¬ CLIï¼ˆingest/calc/rank/export_excel/export_pptï¼‰ä¸ FastAPIï¼ˆ/query /rank /drilldownï¼‰ã€‚è¯·å°½é‡å¡«å…¨ï¼Œèƒ½å¤§å¹…é™ä½æ’æŸ¥æ—¶é—´ã€‚

  - type: dropdown
    id: entrypoint
    attributes:
      label: "ä½ æ˜¯åœ¨å“ªä¸ªå…¥å£é‡åˆ°é—®é¢˜ï¼Ÿ"
      options:
        - "CLI: ingestï¼ˆExcel å…¥åº“ï¼‰"
        - "CLI: calcï¼ˆæŒ‡æ ‡/é£é™©è¯„åˆ†ï¼‰"
        - "CLI: queryï¼ˆæŸ¥è¯¢å•æŒ‡æ ‡ï¼‰"
        - "CLI: rankï¼ˆæ’åï¼‰"
        - "CLI: drilldownï¼ˆä¸‹é’»ï¼‰"
        - "CLI: export_excelï¼ˆå¯¼å‡º Excelï¼‰"
        - "CLI: export_pptï¼ˆå¯¼å‡º PPTï¼‰"
        - "API: /query"
        - "API: /rank"
        - "API: /drilldown"
        - "å…¶ä»–"
    validations:
      required: true

  - type: textarea
    id: command_or_request
    attributes:
      label: "ä½ è¿è¡Œçš„å‘½ä»¤ / è¯·æ±‚"
      description: "ç²˜è´´ä½ æ‰§è¡Œçš„ CLI å‘½ä»¤æˆ– curl è¯·æ±‚ã€‚"
      placeholder: |
        CLI ç¤ºä¾‹ï¼š
        python -m app.cli ingest --input-dir data/input --db-path data/output/finance.db --reset --json

        API ç¤ºä¾‹ï¼š
        curl -s -X POST http://127.0.0.1:8000/query \
          -H "Content-Type: application/json" \
          -d '{"company":"æ˜Ÿæ²³ç§‘æŠ€","year":2023,"indicator":"net_profit_margin"}'
      render: shell
    validations:
      required: true

  - type: textarea
    id: what_happened
    attributes:
      label: "å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"
      description: "æè¿°ç°è±¡ï¼ˆåŒ…å«é”™è¯¯ç /trace_id/æŠ¥é”™æ ˆæ›´å¥½ï¼‰ã€‚"
      placeholder: |
        ç°è±¡ï¼š
        å®é™…è¾“å‡ºï¼š
        é”™è¯¯ç ï¼ˆå¦‚ parse_error / missing_required_subject ç­‰ï¼‰ï¼š
        trace_idï¼š
      render: text
    validations:
      required: true

  - type: textarea
    id: expected
    attributes:
      label: "ä½ æœŸæœ›å‘ç”Ÿä»€ä¹ˆï¼Ÿ"
      placeholder: "ä¾‹å¦‚ï¼šåº”æ­£å¸¸å…¥åº“å¹¶è¿”å› successï¼›æˆ– export_ppt ç”Ÿæˆæ¯å…¬å¸è‡³å°‘ 2 é¡µçš„ PPTã€‚"
    validations:
      required: true

  - type: textarea
    id: reproduce
    attributes:
      label: "æœ€å°å¤ç°æ­¥éª¤"
      description: "æŒ‰æ­¥éª¤å†™ï¼ˆæœ€å¥½ä»ç©ºç¯å¢ƒå¼€å§‹ï¼‰ï¼Œä»¥åŠä½ ä½¿ç”¨çš„æ•°æ®ç‰¹å¾ã€‚"
      placeholder: |
        1) git clone ...
        2) pip install -e .[dev]
        3) ä½¿ç”¨ xxx è¾“å…¥æ–‡ä»¶ï¼ˆç»“æ„ï¼šæ¯å…¬å¸ä¸€ä¸ª Excelï¼Œ3 ä¸ª sheet...ï¼‰
        4) æ‰§è¡Œå‘½ä»¤ ...
        5) å¾—åˆ°é”™è¯¯ ...
    validations:
      required: true

  - type: dropdown
    id: runtime
    attributes:
      label: "è¿è¡Œæ–¹å¼"
      options:
        - "æœ¬åœ° venv"
        - "Docker"
        - "docker-compose"
        - "CI / å…¶ä»–"
    validations:
      required: true

  - type: textarea
    id: env
    attributes:
      label: "ç¯å¢ƒä¿¡æ¯"
      description: "å»ºè®®ç²˜è´´ï¼šOSã€Python ç‰ˆæœ¬ã€å…³é”®ä¾èµ–ç‰ˆæœ¬ï¼ˆpandas/openpyxl/matplotlib/python-pptxï¼‰ã€ä»¥åŠæ˜¯å¦ä½¿ç”¨ WSLã€‚"
      placeholder: |
        OS:
        Python: 3.10.x
        pandas:
        openpyxl:
        matplotlib:
        python-pptx:
    validations:
      required: true

  - type: textarea
    id: attachments
    attributes:
      label: "ç›¸å…³è¾“å…¥/äº§ç‰©ï¼ˆå¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼‰"
      description: "å¯ä¸Šä¼ è„±æ•åçš„ Excel æ ·ä¾‹ã€æˆ–æˆªå›¾ï¼ˆä¾‹å¦‚ sheet åç§°/è¡¨å¤´/ç§‘ç›®åˆ—æ ¼å¼ï¼‰ã€‚æ•æ„Ÿæ•°æ®è¯·è„±æ•ã€‚"
    validations:
      required: false

  - type: checkboxes
    id: checklist
    attributes:
      label: "æäº¤å‰ç¡®è®¤"
      options:
        - label: "æˆ‘å·²æœç´¢è¿‡ç°æœ‰ issueï¼Œç¡®è®¤ä¸æ˜¯é‡å¤é—®é¢˜"
          required: true
        - label: "æˆ‘å·²å¯¹è¾“å…¥æ•°æ®åšè„±æ•/æ‰“ç ï¼ˆå¦‚æ¶‰åŠè´¢åŠ¡æ•°æ®ï¼‰"
          required: true
        - label: "æˆ‘å¯ä»¥æä¾›æœ€å°å¤ç°æ ·ä¾‹ï¼ˆæˆ–æˆªå›¾/ç‰‡æ®µï¼‰"
          required: false
